### 3.5.27 确保内核触发错误后直接退出

**级别：** 要求

**适用版本：** 全部

**规则说明：**

系统内核在发现一些非致命错误时会触发oops，如果在oops发生后内核仍然继续运行，可能会导致错误依然存在并影响内核的稳定性和可靠性。因此，建议设置使能panic_on_oops，在发生oops后直接panic退出而不是继续运行。

**规则影响：**

内核触发oops后会直接panic，不会继续运行。

**检查方法：**

检查/proc/sys/kernel/panic_on_oops文件的值，0表示关闭，1表示开启：

```bash
# cat /proc/sys/kernel/panic_on_oops
1
```

**修复方法：**

- 可以通过修改/proc/sys/kernel/panic_on_oops的值来临时修改oops行为：

  ```bash
  # echo 1 > /proc/sys/kernel/panic_on_oops
  ```

- 或者通过修改/etc/sysctl.conf文件使其永久生效：

  ```bash
  kernel.panic_on_oops=1
  ```

  然后启用该配置：

  ```bash
  # sysctl -p /etc/sysctl.conf
  ```